var Pe=Object.defineProperty;var Le=(s,t,e)=>t in s?Pe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>(Le(s,typeof t!="symbol"?t+"":t,e),e),Z=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var o=(s,t,e)=>(Z(s,t,"read from private field"),e?e.call(s):t.get(s)),n=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},m=(s,t,e,i)=>(Z(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e);var a=(s,t,e)=>(Z(s,t,"access private method"),e);import{_ as pe,o as ue,a as F,c as D,p as Ae,b as Ne,d as oe,u as Ee,e as ke,f as Be,i as Fe,r as De,g as he,F as de,h as Ie,j as Te,t as Oe,k as qe}from"./index-JfC3NB_t.js";import{Vector2 as O,Vector3 as je,Color as ne,Clock as We,PerspectiveCamera as Ge,Scene as He,WebGLRenderer as Ve,SRGBColorSpace as Ye,MathUtils as q,TextureLoader as Ue,InstancedMesh as $e,PlaneGeometry as Xe,MeshBasicMaterial as Je,AdditiveBlending as Ke,Object3D as Qe}from"https://cdn.jsdelivr.net/npm/three@0.160.0/+esm";import"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/loaders/GLTFLoader.js/+esm";import"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/loaders/DRACOLoader.js/+esm";import{RGBELoader as Ze}from"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/loaders/RGBELoader.js/+esm";import"https://lf1-cdn-tos.bytegoofy.com/obj/iconpark/icons_31448_6.ba84f09a41adaeba0f18d00f7c11f505.es5.js";var l,w,S,z,C,M,_,b,x,L,j,xe,W,fe,G,ge,H,ze,V,ye,Y,we,A,ae,R,I,U,Se,N,ce,$,Ce,E,re,P,T,X,Me;class et{constructor(t){n(this,j);n(this,W);n(this,G);n(this,H);n(this,V);n(this,Y);n(this,A);n(this,R);n(this,U);n(this,N);n(this,$);n(this,E);n(this,P);n(this,X);n(this,l,void 0);h(this,"canvas");h(this,"camera");h(this,"cameraMinAspect");h(this,"cameraMaxAspect");h(this,"cameraFov");h(this,"maxPixelRatio");h(this,"minPixelRatio");h(this,"scene");h(this,"renderer");n(this,w,void 0);h(this,"size",{width:0,height:0,wWidth:0,wHeight:0,ratio:0,pixelRatio:0});h(this,"render",a(this,X,Me));h(this,"onBeforeRender",()=>{});h(this,"onAfterRender",()=>{});h(this,"onAfterResize",()=>{});n(this,S,!1);n(this,z,!1);h(this,"isDisposed",!1);n(this,C,void 0);n(this,M,void 0);n(this,_,void 0);n(this,b,new We);n(this,x,{elapsed:0,delta:0});n(this,L,void 0);m(this,l,{...t}),a(this,j,xe).call(this),a(this,W,fe).call(this),a(this,G,ge).call(this),this.resize(),a(this,H,ze).call(this)}resize(){let t,e;o(this,l).size instanceof Object?(t=o(this,l).size.width,e=o(this,l).size.height):o(this,l).size==="parent"&&this.canvas.parentNode?(t=this.canvas.parentNode.offsetWidth,e=this.canvas.parentNode.offsetHeight):(t=window.innerWidth,e=window.innerHeight),this.size.width=t,this.size.height=e,this.size.ratio=t/e,a(this,U,Se).call(this),a(this,$,Ce).call(this),this.onAfterResize(this.size)}updateWorldSize(){if(this.camera.isPerspectiveCamera){const t=this.camera.fov*Math.PI/180;this.size.wHeight=2*Math.tan(t/2)*this.camera.position.length(),this.size.wWidth=this.size.wHeight*this.camera.aspect}else this.camera.isOrthographicCamera&&(this.size.wHeight=this.camera.top-this.camera.bottom,this.size.wWidth=this.camera.right-this.camera.left)}get postprocessing(){return o(this,w)}set postprocessing(t){m(this,w,t),this.render=t.render}dispose(){a(this,V,ye).call(this),a(this,P,T).call(this),this.scene.traverse(t=>{t.isMesh&&typeof t.material=="object"&&(Object.keys(t.material).forEach(e=>{const i=t.material[e];i!==null&&typeof i=="object"&&typeof i.dispose=="function"&&i.dispose()}),t.material.dispose(),t.geometry.dispose())}),this.scene.clear(),this.renderer.dispose(),this.isDisposed=!0}}l=new WeakMap,w=new WeakMap,S=new WeakMap,z=new WeakMap,C=new WeakMap,M=new WeakMap,_=new WeakMap,b=new WeakMap,x=new WeakMap,L=new WeakMap,j=new WeakSet,xe=function(){this.camera=new Ge,this.cameraFov=this.camera.fov},W=new WeakSet,fe=function(){this.scene=new He},G=new WeakSet,ge=function(){o(this,l).canvas?this.canvas=o(this,l).canvas:o(this,l).id?this.canvas=document.getElementById(o(this,l).id):console.error("Three: Missing canvas or id parameter"),this.canvas.style.display="block";const t={canvas:this.canvas,powerPreference:"high-performance",...o(this,l).rendererOptions??{}};this.renderer=new Ve(t),this.renderer.outputColorSpace=Ye},H=new WeakSet,ze=function(){o(this,l).size instanceof Object||(window.addEventListener("resize",a(this,R,I).bind(this)),o(this,l).size==="parent"&&(m(this,M,new ResizeObserver(a(this,R,I).bind(this))),o(this,M).observe(this.canvas.parentNode))),m(this,C,new IntersectionObserver(a(this,Y,we).bind(this),{root:null,rootMargin:"0px",threshold:0})),o(this,C).observe(this.canvas),document.addEventListener("visibilitychange",a(this,A,ae).bind(this))},V=new WeakSet,ye=function(){var t,e;window.removeEventListener("resize",a(this,R,I).bind(this)),(t=o(this,M))==null||t.disconnect(),(e=o(this,C))==null||e.disconnect(),document.removeEventListener("visibilitychange",a(this,A,ae).bind(this))},Y=new WeakSet,we=function(t){m(this,S,t[0].isIntersecting),o(this,S)?a(this,E,re).call(this):a(this,P,T).call(this)},A=new WeakSet,ae=function(t){o(this,S)&&(document.hidden?a(this,P,T).call(this):a(this,E,re).call(this))},R=new WeakSet,I=function(){o(this,_)&&clearTimeout(o(this,_)),m(this,_,setTimeout(this.resize.bind(this),100))},U=new WeakSet,Se=function(){this.camera.aspect=this.size.width/this.size.height,this.camera.isPerspectiveCamera&&this.cameraFov&&(this.cameraMinAspect&&this.camera.aspect<this.cameraMinAspect?a(this,N,ce).call(this,this.cameraMinAspect):this.cameraMaxAspect&&this.camera.aspect>this.cameraMaxAspect?a(this,N,ce).call(this,this.cameraMaxAspect):this.camera.fov=this.cameraFov),this.camera.updateProjectionMatrix(),this.updateWorldSize()},N=new WeakSet,ce=function(t){const e=Math.tan(q.degToRad(this.cameraFov/2))/(this.camera.aspect/t);this.camera.fov=2*q.radToDeg(Math.atan(e))},$=new WeakSet,Ce=function(){var e;this.renderer.setSize(this.size.width,this.size.height),(e=o(this,w))==null||e.setSize(this.size.width,this.size.height);let t=window.devicePixelRatio;this.maxPixelRatio&&t>this.maxPixelRatio?t=this.maxPixelRatio:this.minPixelRatio&&t<this.minPixelRatio&&(t=this.minPixelRatio),this.renderer.setPixelRatio(t),this.size.pixelRatio=t},E=new WeakSet,re=function(){if(o(this,z))return;const t=()=>{m(this,L,requestAnimationFrame(t)),o(this,x).delta=o(this,b).getDelta(),o(this,x).elapsed+=o(this,x).delta,this.onBeforeRender(o(this,x)),this.render(),this.onAfterRender(o(this,x))};m(this,z,!0),o(this,b).start(),t()},P=new WeakSet,T=function(){o(this,z)&&(cancelAnimationFrame(o(this,L)),m(this,z,!1),o(this,b).stop())},X=new WeakSet,Me=function(){this.renderer.render(this.scene,this.camera)};const g=new Map,y=new O;let ee,te,ie=!1;function tt(s){const t={position:new O,nPosition:new O,hover:!1,onEnter(){},onMove(){},onClick(){},onLeave(){},...s};return function(e,i){g.has(e)||(g.set(e,i),ie||(document.body.addEventListener("pointermove",le),document.body.addEventListener("pointerleave",me),document.body.addEventListener("click",it),ie=!0))}(s.domElement,t),t.dispose=()=>{var e;e=s.domElement,g.delete(e),g.size===0&&(document.body.removeEventListener("pointermove",le),document.body.removeEventListener("pointerleave",me),ie=!1)},t}function le(s){y.x=s.clientX,y.y=s.clientY;for(const[t,e]of g){const i=t.getBoundingClientRect();be(i)?(_e(e,i),e.hover||(e.hover=!0,e.onEnter(e)),e.onMove(e)):e.hover&&(e.hover=!1,e.onLeave(e))}}function it(s){y.x=s.clientX,y.y=s.clientY;for(const[t,e]of g){const i=t.getBoundingClientRect();_e(e,i),be(i)&&e.onClick(e)}}function me(){for(const s of g.values())s.hover&&(s.hover=!1,s.onLeave(s))}function _e(s,t){const{position:e,nPosition:i}=s;e.x=y.x-t.left,e.y=y.y-t.top,i.x=e.x/t.width*2-1,i.y=-e.y/t.height*2+1}function be(s){const{x:t,y:e}=y,{left:i,top:r,width:d,height:v}=s;return t>=i&&t<=i+d&&e>=r&&e<=r+v}async function st(s,t){let e;return e=s.endsWith(".hdr")?await function(i,r){return te||(te=new Ze),te.loadAsync(i,r)}(s,t):await function(i,r){return ee||(ee=new Ue),ee.loadAsync(i,r)}(s,t),e}const{randFloatSpread:se}=q,ot={count:1024,size:.5,colors:[0]};var J,Re,k,ve;class nt extends $e{constructor(e){const i={...ot,...e},r=new Xe(i.size,i.size),d=new Je({blending:Ke,opacity:.5,depthWrite:!1}),v={uRatio:{value:new O(1,1)},uBlurLevel:{value:4},uFocalLength:{value:1},uFocusDistance:{value:1},uMinScale:{value:.1},uMaxScale:{value:1.4},uTime:{value:0},uTimeScale:{value:1},uNoiseCoordScale:{value:3},uNoiseDisplacementScale:{value:.005}};d.onBeforeCompile=c=>{Object.assign(c.uniforms,v),c.vertexShader=`
        vec4 permute(vec4 x){vec4 xm=mod(x,289.0);return mod(((xm*34.0)+10.0)*xm,289.0);}float psrdnoise(vec3 x,vec3 period,float alpha,out vec3 gradient){
#ifndef PERLINGRID
const mat3 M=mat3(0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0);const mat3 Mi=mat3(-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5);
#endif
vec3 uvw;
#ifndef PERLINGRID
uvw=M*x;
#else
uvw=x+dot(x,vec3(1.0/3.0));
#endif
vec3 i0=floor(uvw);vec3 f0=fract(uvw);vec3 g_=step(f0.xyx,f0.yzz);vec3 l_=1.0-g_;vec3 g=vec3(l_.z,g_.xy);vec3 l=vec3(l_.xy,g_.z);vec3 o1=min(g,l);vec3 o2=max(g,l);vec3 i1=i0+o1;vec3 i2=i0+o2;vec3 i3=i0+vec3(1.0);vec3 v0,v1,v2,v3;
#ifndef PERLINGRID
v0=Mi*i0;v1=Mi*i1;v2=Mi*i2;v3=Mi*i3;
#else
v0=i0-dot(i0,vec3(1.0/6.0));v1=i1-dot(i1,vec3(1.0/6.0));v2=i2-dot(i2,vec3(1.0/6.0));v3=i3-dot(i3,vec3(1.0/6.0));
#endif
vec3 x0=x-v0;vec3 x1=x-v1;vec3 x2=x-v2;vec3 x3=x-v3;if(any(greaterThan(period,vec3(0.0)))){vec4 vx=vec4(v0.x,v1.x,v2.x,v3.x);vec4 vy=vec4(v0.y,v1.y,v2.y,v3.y);vec4 vz=vec4(v0.z,v1.z,v2.z,v3.z);if(period.x>0.0)vx=mod(vx,period.x);if(period.y>0.0)vy=mod(vy,period.y);if(period.z>0.0)vz=mod(vz,period.z);
#ifndef PERLINGRID
i0=M*vec3(vx.x,vy.x,vz.x);i1=M*vec3(vx.y,vy.y,vz.y);i2=M*vec3(vx.z,vy.z,vz.z);i3=M*vec3(vx.w,vy.w,vz.w);
#else
v0=vec3(vx.x,vy.x,vz.x);v1=vec3(vx.y,vy.y,vz.y);v2=vec3(vx.z,vy.z,vz.z);v3=vec3(vx.w,vy.w,vz.w);i0=v0+dot(v0,vec3(1.0/3.0));i1=v1+dot(v1,vec3(1.0/3.0));i2=v2+dot(v2,vec3(1.0/3.0));i3=v3+dot(v3,vec3(1.0/3.0));
#endif
i0=floor(i0+0.5);i1=floor(i1+0.5);i2=floor(i2+0.5);i3=floor(i3+0.5);}vec4 hash=permute(permute(permute(vec4(i0.z,i1.z,i2.z,i3.z))+vec4(i0.y,i1.y,i2.y,i3.y))+vec4(i0.x,i1.x,i2.x,i3.x));vec4 theta=hash*3.883222077;vec4 sz=hash*-0.006920415+0.996539792;vec4 psi=hash*0.108705628;vec4 Ct=cos(theta);vec4 St=sin(theta);vec4 sz_prime=sqrt(1.0-sz*sz);vec4 gx,gy,gz;
#ifdef FASTROTATION
vec4 qx=St;vec4 qy=-Ct;vec4 qz=vec4(0.0);vec4 px=sz*qy;vec4 py=-sz*qx;vec4 pz=sz_prime;psi+=alpha;vec4 Sa=sin(psi);vec4 Ca=cos(psi);gx=Ca*px+Sa*qx;gy=Ca*py+Sa*qy;gz=Ca*pz+Sa*qz;
#else
if(alpha!=0.0){vec4 Sp=sin(psi);vec4 Cp=cos(psi);vec4 px=Ct*sz_prime;vec4 py=St*sz_prime;vec4 pz=sz;vec4 Ctp=St*Sp-Ct*Cp;vec4 qx=mix(Ctp*St,Sp,sz);vec4 qy=mix(-Ctp*Ct,Cp,sz);vec4 qz=-(py*Cp+px*Sp);vec4 Sa=vec4(sin(alpha));vec4 Ca=vec4(cos(alpha));gx=Ca*px+Sa*qx;gy=Ca*py+Sa*qy;gz=Ca*pz+Sa*qz;}else{gx=Ct*sz_prime;gy=St*sz_prime;gz=sz;}
#endif
vec3 g0=vec3(gx.x,gy.x,gz.x);vec3 g1=vec3(gx.y,gy.y,gz.y);vec3 g2=vec3(gx.z,gy.z,gz.z);vec3 g3=vec3(gx.w,gy.w,gz.w);vec4 w=0.5-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3));w=max(w,0.0);vec4 w2=w*w;vec4 w3=w2*w;vec4 gdotx=vec4(dot(g0,x0),dot(g1,x1),dot(g2,x2),dot(g3,x3));float n=dot(w3,gdotx);vec4 dw=-6.0*w2*gdotx;vec3 dn0=w3.x*g0+dw.x*x0;vec3 dn1=w3.y*g1+dw.y*x1;vec3 dn2=w3.z*g2+dw.z*x2;vec3 dn3=w3.w*g3+dw.w*x3;gradient=39.5*(dn0+dn1+dn2+dn3);return 39.5*n;}
        uniform vec2 uRatio;
        uniform float uFocalLength;
        uniform float uFocusDistance;
        uniform float uMinScale;
        uniform float uMaxScale;
        uniform float uTime;
        uniform float uNoiseCoordScale;
        uniform float uNoiseDisplacementScale;
        varying float vBokeh;
      `+c.vertexShader,c.vertexShader=c.vertexShader.replace("#include <project_vertex>","vec4 mvPosition=vec4(0.0,0.0,0.0,1.0);mvPosition=instanceMatrix*mvPosition;vec3 grad;psrdnoise(mvPosition.xyz*uNoiseCoordScale,vec3(0),uTime*0.5,grad);grad*=uNoiseCoordScale;mvPosition.xyz+=grad*uNoiseDisplacementScale;float d=length(mvPosition.xyz-cameraPosition);vBokeh=smoothstep(0.0,uFocalLength,abs(d-uFocusDistance));float scale=uMinScale+uMaxScale*vBokeh;mvPosition=modelViewMatrix*mvPosition;gl_Position=projectionMatrix*mvPosition;gl_Position.xy+=transformed.xy*uRatio*scale*instanceMatrix[0][0];"),c.fragmentShader=`
        uniform float uBlurLevel;
        varying float vBokeh;
      `+c.fragmentShader,c.fragmentShader=c.fragmentShader.replace("#include <map_fragment>",`#ifdef USE_MAP
vec2 uv=vMapUv;uv.y/=8.0;float blurLevel=uBlurLevel*vBokeh;float uvY=floor(blurLevel);float uvYFract=fract(blurLevel);uv.y+=0.125*uvY;vec4 tex1=texture2D(map,uv);uv.y+=0.125;vec4 tex2=texture2D(map,uv);vec4 sampledDiffuseColor=mix(tex1,tex2,uvYFract);diffuseColor*=sampledDiffuseColor;
#else
diffuseColor.a=0.0;
#endif
`)};super(r,d,i.count);n(this,J);n(this,k);this.config=i,this.uniforms=v,this.dummyO=new Qe,a(this,J,Re).call(this)}setColors(e){this.config.colors=e,a(this,k,ve).call(this),console.log(e.map(i=>(16777215&i).toString(16).padStart(6,"0")))}update(e){this.uniforms.uTime.value+=e.delta*this.uniforms.uTimeScale.value}setSize(e,i){e>i?this.uniforms.uRatio.value.set(1,e/i):this.uniforms.uRatio.value.set(i/e,1)}}J=new WeakSet,Re=function(){for(let e=0;e<this.count;e++)this.dummyO.position.set(se(2),se(2),se(1.7)),this.dummyO.scale.set(1,1,1).multiplyScalar(q.randFloat(.5,1)),this.dummyO.updateMatrix(),this.setMatrixAt(e,this.dummyO.matrix);a(this,k,ve).call(this)},k=new WeakSet,ve=function(){const e=function(i){let r,d;return v(i),{setColors:v,getColorAt:function(c,f=new ne){const B=Math.max(0,Math.min(1,c))*(r.length-1),p=Math.floor(B),u=d[p];if(p>=r.length-1)return u.clone();const K=B-p,Q=d[p+1];return f.r=u.r+K*(Q.r-u.r),f.g=u.g+K*(Q.g-u.g),f.b=u.b+K*(Q.b-u.b),f}};function v(c){r=c,d=[],r.forEach(f=>{d.push(new ne(f))})}}(this.config.colors);for(let i=0;i<this.count;i++)this.setColorAt(i,e.getColorAt(Math.random()));this.instanceColor.needsUpdate=!0};function at(s,t){const e=new et({canvas:s,size:"parent"});e.cameraMaxAspect=1.7,e.camera.position.z=1,e.updateWorldSize();const i=new nt;i.setSize(e.size.width,e.size.height),e.scene.add(i);const r=new je,d=tt({domElement:s});return d.onMove=()=>{r.x=.1*-d.nPosition.x,r.y=.1*-d.nPosition.y},e.onBeforeRender=v=>{i.position.lerp(r,.05),i.update(v)},e.onAfterResize=v=>{i.setSize(v.width,v.height)},{three:e,particles:i,loadMap:function(v){st(v).then(c=>{c.flipY=!1,i.material.map=c,i.material.needsUpdate=!0})},setBackgroundColor(v){e.scene.background=new ne(v)},setColors:i.setColors.bind(i),dispose(){e.dispose()}}}const ct=s=>(Ae("data-v-59bc27a0"),s=s(),Ne(),s),rt={class:"trands"},vt=ct(()=>oe("canvas",{id:"webgl-canvas"},null,-1)),ht=[vt],dt={__name:"Trends",setup(s){return ue(()=>{const t=at(document.getElementById("webgl-canvas"));t.loadMap("/img/bokeh-particles2.png"),t.setColors([7161954,16613996,2280641])}),(t,e)=>(F(),D("div",rt,ht))}},lt=pe(dt,[["__scopeId","data-v-59bc27a0"]]),mt={class:"ba"},pt=["onClick"],ut={key:0,class:"icon"},xt={__name:"Home",setup(s){const t=Ee(),e=[{text:"基础模式",pathName:"playChess",codeState:!0},{text:"恋爱版",pathName:"playChess2",codeState:!0},{text:"情侣版",pathName:"playChess3",codeState:!1},{text:"高级版",pathName:"playChess4",codeState:!1},{text:"私密版",pathName:"playChess5",codeState:!1},{text:"组合模式",pathName:"playChess6",codeState:!1}],i=ke(),r=Be(()=>i.state.empower),d=()=>i.commit("initPosition"),v=c=>{!c.codeState&&!r.value||(d(),t.push({name:c.pathName}))};return ue(()=>{const c=Fe("loader");c.vle=!1}),(c,f)=>{const B=De("iconpark-icon");return F(),D(de,null,[he(lt),oe("div",mt,[(F(),D(de,null,Ie(e,p=>oe("button",{class:"button",onClick:u=>v(p)},[Te(Oe(p.text)+" ",1),!p.codeState&&!r.value?(F(),D("div",ut,[he(B,{name:"lock",size:"18",fill:"#000000"})])):qe("",!0)],8,pt)),64))])],64)}}},Mt=pe(xt,[["__scopeId","data-v-e91eb1a2"]]);export{Mt as default};
